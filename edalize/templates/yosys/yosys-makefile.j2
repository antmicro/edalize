#Auto generated by Edalize

TARGET   := {{ name }}

all: $(TARGET).{{ default_target }}

{% if use_surelog -%}
{{ top }}.uhdm:
	$(MAKE) -f surelog.mk

DEPENDENCIES := {{ top }}.uhdm {{ yosys_template }}
{% elif use_sv2v -%}
{{ sv_to_verilog }}:
	$(MAKE) -f sv2v.mk

DEPENDENCIES := {{ sv_to_verilog }} {{ yosys_template }}
{% else %}
DEPENDENCIES := {{ yosys_template }}
{%- endif %}

%.blif: ${DEPENDENCIES}
	$(EDALIZE_LAUNCHER) yosys {{ yosys_modules }} -l yosys.log -p "tcl {{ yosys_template }}"
%.json: ${DEPENDENCIES}
	$(EDALIZE_LAUNCHER) yosys {{ yosys_modules }} -l yosys.log -p "tcl {{ yosys_template }}"
%.edif: ${DEPENDENCIES}
	$(EDALIZE_LAUNCHER) yosys {{ yosys_modules }} -l yosys.log -p "tcl {{ yosys_template }}"

clean:
	rm -f $(TARGET).blif $(TARGET).json $(TARGET).edif
