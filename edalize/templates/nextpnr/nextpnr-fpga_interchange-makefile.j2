#Auto generated by Edalize

TARGET   := {{ name }}

all: $(TARGET).{{ default_target }}

{{ name }}.json: {{ name }}.mk
	$(MAKE) -f $<

{{ name }}.netlist: {{ name }}.json
	python -m fpga_interchange.yosys_json --schema_dir {{ schema_dir }} --device {{ device }} --top {{ toplevel }} {{ name }}.json {{ name }}.netlist

{{ name }}.phys: {{ name }}.netlist
	nextpnr-{{ arch }} --chipdb {{ chipdb }} --package {{ package }} --xdc {{ constr }} --netlist {{ name }}.netlist --write {{ name }}.routed.json --phys {{ name }}.phys {{ additional_options }}

{{ name }}.fasm: {{ name }}.phys
	python -m fpga_interchange.fasm_generator --schema_dir {{ schema_dir }} --family {{ family }} {{ device }} {{ name }}.netlist {{ name }}.phys {{ name }}.fasm


clean:
	rm -f $(TARGET).json $(TARGET).routed.json $(TARGET).netlist $(TARGET).phys $(TARGET).fasm
